# –ì–ª–∞–≤–∞ 6: UX-–ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è AI

[‚¨ÖÔ∏è –ü—Ä–µ–¥—ã–¥—É—â–∞—è –≥–ª–∞–≤–∞](./05-architecture.md) | [üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é](../README.md) | [üìë –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ](../TOC.md) | [‚û°Ô∏è –°–ª–µ–¥—É—é—â–∞—è –≥–ª–∞–≤–∞](./07-security.md)

---

## Streaming UI

### Incremental Rendering

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ –º–µ—Ä–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤:

```typescript
// src/features/chat/ui/StreamingMessage.tsx
import { memo } from 'react';
import './StreamingMessage.scss';

interface StreamingMessageProps {
  content: string;
  isStreaming: boolean;
}

export const StreamingMessage = memo<StreamingMessageProps>(({ 
  content, 
  isStreaming 
}) => {
  return (
    <div className="streaming-message">
      <div className="streaming-message__content">
        {content}
      </div>
      {isStreaming && (
        <span className="streaming-message__cursor" aria-label="Generating">
          ‚ñã
        </span>
      )}
    </div>
  );
});
```

```scss
// StreamingMessage.scss
.streaming-message {
  &__content {
    white-space: pre-wrap;
    word-break: break-word;
  }

  &__cursor {
    display: inline-block;
    animation: blink 1s infinite;
    margin-left: 2px;
  }
}

@keyframes blink {
  0%, 49% { opacity: 1; }
  50%, 100% { opacity: 0; }
}
```

### Typing Indicators

```typescript
export function TypingIndicator() {
  return (
    <div className="typing-indicator">
      <div className="typing-indicator__dot" />
      <div className="typing-indicator__dot" />
      <div className="typing-indicator__dot" />
    </div>
  );
}
```

```scss
.typing-indicator {
  display: flex;
  gap: 4px;
  padding: 8px;

  &__dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: var(--color-primary);
    animation: typing 1.4s infinite ease-in-out both;

    &:nth-child(1) { animation-delay: -0.32s; }
    &:nth-child(2) { animation-delay: -0.16s; }
  }
}

@keyframes typing {
  0%, 80%, 100% {
    transform: scale(0);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}
```

---

## –ò—Å—Ç–æ—Ä–∏—è –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏

```typescript
// src/entities/message/model/messageStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface Message {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  timestamp: number;
}

interface MessageStore {
  conversations: Record<string, Message[]>;
  currentConversationId: string | null;
  
  createConversation: () => string;
  addMessage: (conversationId: string, message: Omit<Message, 'id' | 'timestamp'>) => void;
  getConversation: (id: string) => Message[];
  deleteConversation: (id: string) => void;
}

export const useMessageStore = create<MessageStore>()(
  persist(
    (set, get) => ({
      conversations: {},
      currentConversationId: null,

      createConversation: () => {
        const id = `conv-${Date.now()}`;
        set((state) => ({
          conversations: { ...state.conversations, [id]: [] },
          currentConversationId: id,
        }));
        return id;
      },

      addMessage: (conversationId, message) => {
        const newMessage: Message = {
          ...message,
          id: `msg-${Date.now()}-${Math.random()}`,
          timestamp: Date.now(),
        };

        set((state) => ({
          conversations: {
            ...state.conversations,
            [conversationId]: [
              ...(state.conversations[conversationId] || []),
              newMessage,
            ],
          },
        }));
      },

      getConversation: (id) => {
        return get().conversations[id] || [];
      },

      deleteConversation: (id) => {
        set((state) => {
          const { [id]: _, ...rest } = state.conversations;
          return { conversations: rest };
        });
      },
    }),
    {
      name: 'chat-storage',
    }
  )
);
```

### –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —á–∞—Ç—É

```typescript
// src/features/chat/ui/ConversationList.tsx
export function ConversationList() {
  const { conversations, currentConversationId, createConversation } = useMessageStore();

  return (
    <aside className="conversation-list">
      <button 
        className="conversation-list__new-btn"
        onClick={createConversation}
      >
        + –ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥
      </button>
      
      <div className="conversation-list__items">
        {Object.keys(conversations).map((id) => (
          <ConversationItem
            key={id}
            id={id}
            isActive={id === currentConversationId}
          />
        ))}
      </div>
    </aside>
  );
}
```

### –ü–æ–∏—Å–∫ –≤ –∏—Å—Ç–æ—Ä–∏–∏

```typescript
function useSearchMessages(query: string) {
  const conversations = useMessageStore((state) => state.conversations);

  return useMemo(() => {
    if (!query.trim()) return [];

    const results: Array<{ conversationId: string; message: Message }> = [];
    
    Object.entries(conversations).forEach(([convId, messages]) => {
      messages.forEach((msg) => {
        if (msg.content.toLowerCase().includes(query.toLowerCase())) {
          results.push({ conversationId: convId, message: msg });
        }
      });
    });

    return results;
  }, [conversations, query]);
}
```

---

## Undo/Edit/Regenerate

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤

```typescript
interface EditableMessage {
  id: string;
  content: string;
  isEditing: boolean;
  history: string[]; // –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–π
}

export function EditableMessage({ id, content, onEdit }: any) {
  const [isEditing, setIsEditing] = useState(false);
  const [editedContent, setEditedContent] = useState(content);

  const handleSave = () => {
    onEdit(id, editedContent);
    setIsEditing(false);
  };

  const handleCancel = () => {
    setEditedContent(content);
    setIsEditing(false);
  };

  return (
    <div className="editable-message">
      {isEditing ? (
        <>
          <textarea
            value={editedContent}
            onChange={(e) => setEditedContent(e.target.value)}
            className="editable-message__textarea"
          />
          <div className="editable-message__actions">
            <button onClick={handleSave}>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button onClick={handleCancel}>–û—Ç–º–µ–Ω–∞</button>
          </div>
        </>
      ) : (
        <>
          <div className="editable-message__content">{content}</div>
          <button 
            className="editable-message__edit-btn"
            onClick={() => setIsEditing(true)}
          >
            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
          </button>
        </>
      )}
    </div>
  );
}
```

### –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤

```typescript
export function RegenerateButton({ messageId, onRegenerate }: any) {
  const [isRegenerating, setIsRegenerating] = useState(false);

  const handleRegenerate = async () => {
    setIsRegenerating(true);
    try {
      await onRegenerate(messageId);
    } finally {
      setIsRegenerating(false);
    }
  };

  return (
    <button
      className="regenerate-btn"
      onClick={handleRegenerate}
      disabled={isRegenerating}
    >
      {isRegenerating ? '‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è...' : 'üîÑ –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å'}
    </button>
  );
}
```

### Branching Conversations

```typescript
interface ConversationNode {
  id: string;
  message: Message;
  parentId: string | null;
  children: string[]; // IDs –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤
}

interface BranchingStore {
  nodes: Record<string, ConversationNode>;
  currentPath: string[]; // –¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞
  
  addMessage: (content: string, parentId: string | null) => void;
  switchBranch: (nodeId: string) => void;
  getCurrentMessages: () => Message[];
}

// –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–µ—Ç–∫–∏ –¥–∏–∞–ª–æ–≥–∞
```

---

## Rate Limit Indicators

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤

```typescript
interface RateLimitIndicatorProps {
  used: number;
  limit: number;
  resetAt?: Date;
}

export function RateLimitIndicator({ 
  used, 
  limit, 
  resetAt 
}: RateLimitIndicatorProps) {
  const percentage = (used / limit) * 100;
  const remaining = limit - used;

  return (
    <div className="rate-limit">
      <div className="rate-limit__header">
        <span>–ó–∞–ø—Ä–æ—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</span>
        <span className="rate-limit__count">
          {used} / {limit}
        </span>
      </div>
      
      <div className="rate-limit__bar">
        <div 
          className="rate-limit__fill"
          style={{ 
            width: `${percentage}%`,
            backgroundColor: percentage > 80 ? 'var(--color-danger)' : 'var(--color-success)',
          }}
        />
      </div>

      {remaining === 0 && resetAt && (
        <p className="rate-limit__message">
          –õ–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω. –û–±–Ω–æ–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ {formatTimeUntil(resetAt)}
        </p>
      )}
    </div>
  );
}
```

### –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã

```typescript
export function UsageProgressBar({ current, max, label }: any) {
  const percentage = Math.min((current / max) * 100, 100);
  
  return (
    <div className="usage-bar">
      <div className="usage-bar__label">
        <span>{label}</span>
        <span>{current.toLocaleString()} / {max.toLocaleString()}</span>
      </div>
      <div className="usage-bar__track">
        <div 
          className="usage-bar__fill"
          style={{ width: `${percentage}%` }}
        />
      </div>
    </div>
  );
}
```

---

## Preview –∏ Confirmation

### Preview –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

```typescript
export function MessagePreview({ content, onConfirm, onEdit }: any) {
  const estimatedTokens = Math.ceil(content.length / 4);
  const estimatedCost = (estimatedTokens / 1000) * 0.01;

  return (
    <div className="message-preview">
      <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>
      <div className="message-preview__content">{content}</div>
      
      <div className="message-preview__stats">
        <span>~{estimatedTokens} —Ç–æ–∫–µ–Ω–æ–≤</span>
        <span>~${estimatedCost.toFixed(4)}</span>
      </div>

      <div className="message-preview__actions">
        <button onClick={onConfirm}>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        <button onClick={onEdit}>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>
    </div>
  );
}
```

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

```typescript
export function ConfirmDialog({ 
  title, 
  message, 
  onConfirm, 
  onCancel 
}: any) {
  return (
    <div className="confirm-dialog">
      <div className="confirm-dialog__overlay" onClick={onCancel} />
      <div className="confirm-dialog__content">
        <h2>{title}</h2>
        <p>{message}</p>
        <div className="confirm-dialog__actions">
          <button onClick={onConfirm} className="btn--primary">
            –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
          </button>
          <button onClick={onCancel} className="btn--secondary">
            –û—Ç–º–µ–Ω–∞
          </button>
        </div>
      </div>
    </div>
  );
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
function DeleteButton({ conversationId }: any) {
  const [showConfirm, setShowConfirm] = useState(false);

  const handleDelete = () => {
    deleteConversation(conversationId);
    setShowConfirm(false);
  };

  return (
    <>
      <button onClick={() => setShowConfirm(true)}>–£–¥–∞–ª–∏—Ç—å</button>
      {showConfirm && (
        <ConfirmDialog
          title="–£–¥–∞–ª–∏—Ç—å –¥–∏–∞–ª–æ–≥?"
          message="–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å."
          onConfirm={handleDelete}
          onCancel={() => setShowConfirm(false)}
        />
      )}
    </>
  );
}
```

---

## Attribution

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

```typescript
// –£–∂–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ –≤ –≥–ª–∞–≤–µ 4 (RAG)
export function SourceAttribution({ sources }: { sources: Source[] }) {
  return (
    <details className="source-attribution">
      <summary className="source-attribution__summary">
        üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ ({sources.length})
      </summary>
      <ul className="source-attribution__list">
        {sources.map((source, i) => (
          <li key={i}>
            <a href={source.url} target="_blank" rel="noopener noreferrer">
              {source.title}
            </a>
            <span className="source-attribution__score">
              {(source.relevanceScore * 100).toFixed(0)}%
            </span>
          </li>
        ))}
      </ul>
    </details>
  );
}
```

### Confidence Scores

```typescript
interface ConfidenceIndicatorProps {
  score: number; // 0-1
}

export function ConfidenceIndicator({ score }: ConfidenceIndicatorProps) {
  const level = 
    score > 0.8 ? 'high' :
    score > 0.5 ? 'medium' : 'low';
  
  const label = 
    score > 0.8 ? '–í—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å' :
    score > 0.5 ? '–°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å' : '–ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å';

  return (
    <div className={`confidence confidence--${level}`}>
      <span className="confidence__icon">
        {level === 'high' ? '‚úì' : level === 'medium' ? '~' : '?'}
      </span>
      <span className="confidence__label">{label}</span>
      <span className="confidence__score">{(score * 100).toFixed(0)}%</span>
    </div>
  );
}
```

---

## Accessibility

### –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

```typescript
export function ChatInput() {
  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {
    // Ctrl/Cmd + Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
    if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
      e.preventDefault();
      handleSubmit();
    }

    // Escape –¥–ª—è –æ—Ç–º–µ–Ω—ã
    if (e.key === 'Escape') {
      handleCancel();
    }

    // –°—Ç—Ä–µ–ª–∫–∏ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏
    if (e.key === 'ArrowUp' && e.currentTarget.value === '') {
      e.preventDefault();
      loadPreviousMessage();
    }
  };

  return (
    <textarea
      onKeyDown={handleKeyDown}
      aria-label="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
      placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ... (Ctrl+Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏)"
    />
  );
}
```

### Screen Readers

```typescript
export function AccessibleMessage({ message }: { message: Message }) {
  return (
    <div 
      className="message"
      role="article"
      aria-label={`–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç ${message.role === 'user' ? '–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è' : '–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞'}`}
    >
      <div 
        className="message__content"
        aria-live={message.isStreaming ? 'polite' : 'off'}
      >
        {message.content}
      </div>
      
      {message.timestamp && (
        <time 
          className="message__time"
          dateTime={new Date(message.timestamp).toISOString()}
        >
          {formatTime(message.timestamp)}
        </time>
      )}
    </div>
  );
}
```

### –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥

```typescript
export function VoiceInput({ onTranscript }: { onTranscript: (text: string) => void }) {
  const [isListening, setIsListening] = useState(false);
  const recognition = useRef<SpeechRecognition | null>(null);

  useEffect(() => {
    if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition.current = new SpeechRecognition();
      recognition.current.continuous = true;
      recognition.current.interimResults = true;

      recognition.current.onresult = (event) => {
        const transcript = Array.from(event.results)
          .map(result => result[0].transcript)
          .join('');
        onTranscript(transcript);
      };
    }
  }, []);

  const toggleListening = () => {
    if (isListening) {
      recognition.current?.stop();
    } else {
      recognition.current?.start();
    }
    setIsListening(!isListening);
  };

  if (!recognition.current) {
    return null; // Browser –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
  }

  return (
    <button
      onClick={toggleListening}
      className={`voice-input ${isListening ? 'voice-input--active' : ''}`}
      aria-label={isListening ? '–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å' : '–ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å'}
    >
      üé§
    </button>
  );
}
```

---

## Prompt Design –≤ UI

### Placeholder —Ç–µ–∫—Å—Ç

```typescript
const PROMPT_EXAMPLES = [
  '–û–±—ä—è—Å–Ω–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –∑–∞–º—ã–∫–∞–Ω–∏–π –≤ JavaScript',
  '–ù–∞–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –¥–µ–±–∞—É–Ω—Å–∞ –Ω–∞ TypeScript',
  '–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç React reconciliation?',
  '–°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞',
];

export function ChatInput() {
  const [placeholder] = useState(() => 
    PROMPT_EXAMPLES[Math.floor(Math.random() * PROMPT_EXAMPLES.length)]
  );

  return (
    <textarea
      placeholder={`–ù–∞–ø—Ä–∏–º–µ—Ä: ${placeholder}`}
      className="chat-input"
    />
  );
}
```

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–º–ø—Ç–æ–≤

```typescript
interface PromptTemplate {
  title: string;
  description: string;
  template: string;
  variables?: string[];
}

const TEMPLATES: PromptTemplate[] = [
  {
    title: '–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ–¥–∞',
    description: '–ü–æ–ø—Ä–æ—Å–∏—Ç—å –æ–±—ä—è—Å–Ω–∏—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞',
    template: '–û–±—ä—è—Å–Ω–∏, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥:\n\n```\n{code}\n```',
    variables: ['code'],
  },
  {
    title: '–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥',
    description: '–£–ª—É—á—à–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥',
    template: '–û—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏ —ç—Ç–æ—Ç –∫–æ–¥, —Å–¥–µ–ª–∞–π –µ–≥–æ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º:\n\n```{language}\n{code}\n```',
    variables: ['language', 'code'],
  },
];

export function PromptTemplates({ onSelect }: any) {
  return (
    <div className="prompt-templates">
      <h3>–®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤</h3>
      <div className="prompt-templates__grid">
        {TEMPLATES.map((template) => (
          <button
            key={template.title}
            className="prompt-template-card"
            onClick={() => onSelect(template)}
          >
            <h4>{template.title}</h4>
            <p>{template.description}</p>
          </button>
        ))}
      </div>
    </div>
  );
}
```

### Templates

```typescript
export function PromptBuilder({ template, onSubmit }: any) {
  const [values, setValues] = useState<Record<string, string>>({});

  const filledTemplate = template.template.replace(
    /{(\w+)}/g,
    (_, key) => values[key] || `{${key}}`
  );

  return (
    <div className="prompt-builder">
      <h3>{template.title}</h3>
      
      {template.variables.map((variable: string) => (
        <div key={variable} className="prompt-builder__field">
          <label htmlFor={variable}>{variable}</label>
          <textarea
            id={variable}
            value={values[variable] || ''}
            onChange={(e) => setValues({ ...values, [variable]: e.target.value })}
          />
        </div>
      ))}

      <div className="prompt-builder__preview">
        <h4>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:</h4>
        <pre>{filledTemplate}</pre>
      </div>

      <button onClick={() => onSubmit(filledTemplate)}>
        –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç
      </button>
    </div>
  );
}
```

---

## Loading States

### Skeleton Screens

```typescript
export function MessageSkeleton() {
  return (
    <div className="message-skeleton">
      <div className="skeleton skeleton--circle" style={{ width: 40, height: 40 }} />
      <div className="skeleton-content">
        <div className="skeleton skeleton--text" style={{ width: '80%' }} />
        <div className="skeleton skeleton--text" style={{ width: '60%' }} />
        <div className="skeleton skeleton--text" style={{ width: '70%' }} />
      </div>
    </div>
  );
}
```

```scss
.skeleton {
  background: linear-gradient(
    90deg,
    var(--color-skeleton-base) 25%,
    var(--color-skeleton-highlight) 50%,
    var(--color-skeleton-base) 75%
  );
  background-size: 200% 100%;
  animation: loading 1.5s infinite;

  &--circle {
    border-radius: 50%;
  }

  &--text {
    height: 16px;
    border-radius: 4px;
    margin-bottom: 8px;
  }
}

@keyframes loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}
```

### Progress Indicators

```typescript
interface ProgressIndicatorProps {
  stage: 'searching' | 'generating' | 'formatting';
  progress?: number; // 0-100
}

export function ProgressIndicator({ stage, progress }: ProgressIndicatorProps) {
  const stageLabels = {
    searching: '–ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...',
    generating: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞...',
    formatting: '–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...',
  };

  return (
    <div className="progress-indicator">
      <div className="progress-indicator__label">
        {stageLabels[stage]}
      </div>
      
      {progress !== undefined ? (
        <div className="progress-indicator__bar">
          <div 
            className="progress-indicator__fill"
            style={{ width: `${progress}%` }}
          />
        </div>
      ) : (
        <div className="progress-indicator__spinner" />
      )}
    </div>
  );
}
```

### Estimated Time

```typescript
export function EstimatedTimeIndicator({ estimatedSeconds }: { estimatedSeconds: number }) {
  const [elapsed, setElapsed] = useState(0);

  useEffect(() => {
    const interval = setInterval(() => {
      setElapsed(prev => prev + 1);
    }, 1000);

    return () => clearInterval(interval);
  }, []);

  const remaining = Math.max(0, estimatedSeconds - elapsed);

  return (
    <div className="estimated-time">
      {remaining > 0 ? (
        <span>–ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è: ~{remaining}—Å</span>
      ) : (
        <span>–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏...</span>
      )}
    </div>
  );
}
```

---

## –†–µ–∑—é–º–µ –≥–ª–∞–≤—ã

–í —ç—Ç–æ–π –≥–ª–∞–≤–µ –≤—ã —É–∑–Ω–∞–ª–∏:
- ‚úÖ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞–≤–Ω—ã–π streaming UI
- ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ Undo/Edit/Regenerate flows
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- ‚úÖ Preview –∏ confirmation –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- ‚úÖ Attribution –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- ‚úÖ Accessibility: –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, screen readers, –≥–æ–ª–æ—Å
- ‚úÖ Prompt design –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- ‚úÖ Loading states –∏ skeleton screens

### –ß—Ç–æ –¥–∞–ª—å—à–µ?

–í —Å–ª–µ–¥—É—é—â–µ–π –≥–ª–∞–≤–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å LLM.

---

[‚¨ÖÔ∏è –ì–ª–∞–≤–∞ 5: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](./05-architecture.md) | [üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é](../README.md) | [üìë –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ](../TOC.md) | [‚û°Ô∏è –ì–ª–∞–≤–∞ 7: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](./07-security.md)
