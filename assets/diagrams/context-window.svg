<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400" style="background-color: #f8f9fa;">
  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#1f2937">
    Контекстное окно LLM
  </text>

  <!-- Main Context Window Box -->
  <rect x="50" y="60" width="700" height="200" fill="white" stroke="#6366f1" stroke-width="3" rx="8"/>
  
  <!-- Context Window Label -->
  <text x="400" y="50" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#6366f1">
    Контекстное окно (128K токенов для GPT-4 Turbo)
  </text>

  <!-- System Prompt Section -->
  <g id="system-prompt">
    <rect x="60" y="70" width="150" height="180" fill="#8b5cf6" fill-opacity="0.2" stroke="#7c3aed" stroke-width="2" rx="4"/>
    <text x="135" y="95" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#7c3aed">
      System Prompt
    </text>
    <text x="70" y="115" font-family="Arial, sans-serif" font-size="10" fill="#5b21b6">
      Инструкции для модели:
    </text>
    <text x="70" y="135" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">
      "Ты helpful assistant
    </text>
    <text x="70" y="150" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">
      для разработчиков..."
    </text>
    <text x="135" y="230" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#7c3aed">
      ~500 токенов
    </text>
  </g>

  <!-- User Messages Section -->
  <g id="user-messages">
    <rect x="220" y="70" width="280" height="180" fill="#6366f1" fill-opacity="0.2" stroke="#4f46e5" stroke-width="2" rx="4"/>
    <text x="360" y="95" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#4f46e5">
      История диалога
    </text>
    
    <!-- Message 1 -->
    <rect x="230" y="105" width="120" height="35" fill="#dbeafe" stroke="#3b82f6" stroke-width="1" rx="3"/>
    <text x="240" y="120" font-family="Arial, sans-serif" font-size="9" fill="#1e40af">
      User: "Что такое React?"
    </text>
    <text x="240" y="133" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">
      ~50 токенов
    </text>

    <!-- Message 2 -->
    <rect x="360" y="105" width="130" height="35" fill="#e0e7ff" stroke="#6366f1" stroke-width="1" rx="3"/>
    <text x="370" y="120" font-family="Arial, sans-serif" font-size="9" fill="#4338ca">
      Assistant: "React это..."
    </text>
    <text x="370" y="133" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">
      ~200 токенов
    </text>

    <!-- Message 3 -->
    <rect x="230" y="150" width="120" height="35" fill="#dbeafe" stroke="#3b82f6" stroke-width="1" rx="3"/>
    <text x="240" y="165" font-family="Arial, sans-serif" font-size="9" fill="#1e40af">
      User: "А hooks?"
    </text>
    <text x="240" y="178" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">
      ~30 токенов
    </text>

    <!-- More messages indicator -->
    <text x="360" y="210" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#6b7280">
      ... еще 10 сообщений ...
    </text>

    <text x="360" y="230" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#4f46e5">
      ~5,000 токенов
    </text>
  </g>

  <!-- Response Section -->
  <g id="response">
    <rect x="510" y="70" width="230" height="180" fill="#10b981" fill-opacity="0.2" stroke="#059669" stroke-width="2" rx="4"/>
    <text x="625" y="95" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#059669">
      Генерируемый ответ
    </text>
    <text x="520" y="115" font-family="Arial, sans-serif" font-size="10" fill="#065f46">
      Модель генерирует:
    </text>
    <text x="520" y="135" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">
      "React hooks - это функции,
    </text>
    <text x="520" y="150" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">
      которые позволяют использовать
    </text>
    <text x="520" y="165" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">
      state и другие возможности
    </text>
    <text x="520" y="180" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">
      React в функциональных..."
    </text>
    <text x="625" y="210" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#6b7280">
      (генерация токен за токеном)
    </text>
    <text x="625" y="230" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#059669">
      макс ~2,000 токенов
    </text>
  </g>

  <!-- Info Section -->
  <g id="info">
    <text x="50" y="290" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1f2937">
      Важные особенности:
    </text>
    
    <text x="50" y="315" font-family="Arial, sans-serif" font-size="12" fill="#4b5563">
      • Лимит включает ВСЕ токены: system prompt + история + ответ
    </text>
    <text x="50" y="335" font-family="Arial, sans-serif" font-size="12" fill="#4b5563">
      • При превышении лимита нужно обрезать старые сообщения
    </text>
    <text x="50" y="355" font-family="Arial, sans-serif" font-size="12" fill="#4b5563">
      • Русский текст занимает ~2-3× больше токенов чем английский
    </text>
    <text x="50" y="375" font-family="Arial, sans-serif" font-size="12" fill="#4b5563">
      • 1 токен ≈ 4 символа (английский) или ≈ 2 символа (русский)
    </text>
  </g>

  <!-- Models Comparison -->
  <g id="models">
    <rect x="500" y="290" width="280" height="100" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="8"/>
    <text x="640" y="310" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#92400e">
      Размеры контекста (2025)
    </text>
    <text x="510" y="330" font-family="Arial, sans-serif" font-size="11" fill="#92400e">
      GPT-4 Turbo: 128K | GPT-3.5: 16K
    </text>
    <text x="510" y="350" font-family="Arial, sans-serif" font-size="11" fill="#92400e">
      Claude 3: 200K | Llama 3: 8-32K
    </text>
    <text x="510" y="370" font-family="Arial, sans-serif" font-size="11" fill="#92400e">
      Gemini 1.5 Pro: 1M (!!)
    </text>
  </g>
</svg>
